{"remainingRequest":"C:\\Users\\Ares\\Desktop\\washing-master\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Ares\\Desktop\\washing-master\\src\\components\\ForgetPwd.vue?vue&type=style&index=0&id=98e233e0&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\Ares\\Desktop\\washing-master\\src\\components\\ForgetPwd.vue","mtime":1626249295995},{"path":"C:\\Users\\Ares\\Desktop\\washing-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ares\\Desktop\\washing-master\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1624994109000},{"path":"C:\\Users\\Ares\\Desktop\\washing-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ares\\Desktop\\washing-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ares\\Desktop\\washing-master\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpoMyB7DQogIG1hcmdpbjogNDBweCAwIDA7DQp9DQouc3VibWl0ew0KICAvKm1hcmdpbi1sZWZ0OiAyN3B4OyovDQogIHdpZHRoOjEwMCU7DQp9DQp1bCB7DQogIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsNCiAgcGFkZGluZzogMDsNCn0NCmxpIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBtYXJnaW46IDAgMTBweDsNCn0NCmEgew0KICBjb2xvcjogYmx1ZTsNCn0NCg0KI3ZlcmlmeUJ0bi5kaXNhYmxlew0KICBwb2ludGVyLWV2ZW50czogbm9uZTsNCiAgYmFja2dyb3VuZDogZ3JleTsNCiAgYm9yZGVyOiAxcHggZ3JleSBzb2xpZDsNCn0NCg=="},{"version":3,"sources":["C:\\Users\\Ares\\Desktop\\washing-master\\src\\components\\ForgetPwd.vue"],"names":[],"mappings":";AAiJA,CAAC,EAAE;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;AAClB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACZ;AACA,CAAC,EAAE;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACZ;AACA,CAAC,EAAE;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AAChB;AACA,EAAE;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB","file":"C:/Users/Ares/Desktop/washing-master/src/components/ForgetPwd.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"forgetPwd\">\r\n    <div class=\"pwd-form\">\r\n      <van-form @submit=\"onSubmit\">\r\n        <van-field\r\n            v-model=\"state.phone\"\r\n            type=\"tel\"\r\n            required\r\n            name=\"phone\"\r\n            label=\"手機號碼\"\r\n            placeholder=\"手機號碼\"\r\n            :rules=\"[{ required: true, message: '請輸入您的手機號碼' }]\"\r\n        />\r\n        <van-field\r\n            v-model=\"state.newPassword\"\r\n            type=\"password\"\r\n            required\r\n            name=\"newPassword\"\r\n            label=\"密碼\"\r\n            placeholder=\"密碼\"\r\n            :rules=\"[{ required: true, message: '請輸入您的密碼' }]\"\r\n        />\r\n        <van-field\r\n            v-model=\"state.dbConfiremedPwd\"\r\n            type=\"password\"\r\n            required\r\n            name=\"dbConfiremedPwd\"\r\n            label=\"密碼\"\r\n            placeholder=\"請再次輸入您的密碼\"\r\n            :rules=\"[{ required: true, message: '請再次輸入您的密碼' }]\"\r\n        />\r\n        <van-field\r\n            center\r\n            clearable\r\n            label=\"短信驗證碼\"\r\n            placeholder=\"請輸入您的短信驗證碼\"\r\n            required\r\n            v-model=\"state.code\"\r\n            :rules=\"[{ required: true, message: '請輸入您的短信驗證碼' }]\"\r\n        >\r\n          <template #button>\r\n            <van-button  @click=\"sendSMS\" size=\"small\" type=\"primary\" id=\"verifyBtn\">發送驗證碼</van-button>\r\n          </template>\r\n        </van-field>\r\n        <div class=\"button_center\" style=\"margin: 16px;\">\r\n            <van-button class=\"submit\" round block type=\"primary\" native-type=\"submit\">\r\n                提交\r\n            </van-button>\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueCookies from 'vue-cookies'\r\nimport { reactive } from 'vue';\r\nimport axios from \"axios\";\r\nimport {Toast} from \"vant\";\r\nimport md5 from 'js-md5';\r\nexport default {\r\n  name:'PwdForm',\r\n  beforeMount() {\r\n    if(VueCookies.get(\"LoginStatus\")==1){\r\n      window.location.href=\"./order\";\r\n    }\r\n  },\r\n  setup() {\r\n    const state = reactive({\r\n      phone: '',\r\n      newPassword: '',\r\n      dbConfiremedPwd:'',\r\n      code:'',\r\n    });\r\n    var available=true;\r\n    const sendSMS = () => {\r\n      if(state.phone==\"\"){\r\n        Toast(\"請輸入你的聯絡電話\");\r\n      }else{\r\n        console.log(state.phone);\r\n        // axios.post(\"http://121.199.54.43:8888/tourist/sendSMSVerificationCode?phone=\"+\"852\"+state.phone)\r\n        axios.post(\"/tourist/sendSMSVerificationCode?phone=\"+\"852\"+state.phone)\r\n        .then(function(response){\r\n          // console.log(response);\r\n          Toast(response.data.msg);\r\n        });\r\n        let dc=document.getElementById(\"verifyBtn\");\r\n        let count=60;\r\n        if(available){\r\n          dc.classList.add(\"disable\");\r\n          available=false;\r\n          dc.disabled=true;\r\n          var timer=setInterval(function(){\r\n            count-=1;\r\n            dc.innerText=\"發送驗證碼(\"+count+\")\";\r\n            if(count<=0){\r\n              dc.classList.remove(\"disable\");\r\n              dc.innerText=\"發送驗證碼\";\r\n              available=true;\r\n              dc.disabled=false;\r\n              clearInterval(timer);\r\n            }\r\n          },1000);\r\n        }\r\n      }\r\n    };\r\n    const onSubmit = (values) => {\r\n        if(state.dbConfiremedPwd!=state.newPassword){\r\n          Toast(\"兩次密碼不相同\");\r\n        }\r\n      console.log('submit', values);\r\n      const data = {\r\n        phone: '852'+state.phone,\r\n        newPassword: md5(state.newPassword),\r\n        code:state.code,\r\n      }\r\n      const headers = {\r\n        \"Content-Type\" : \"application/json; charset=utf-8\",\r\n      }\r\n      // axios.post(\"http://121.199.54.43:8888/tourist/changePassword\", data, {headers})\r\n      axios.post(\"/tourist/changePassword\", data, {headers})\r\n        .then(function(register_response){\r\n          console.log(register_response);\r\n          if(register_response.data.code==200){\r\n            Toast(\"Success\");\r\n            window.location.href=\"./order\";\r\n          }else{\r\n            Toast(register_response.data.msg);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error(\"There was an error!\", error.message);\r\n        });\r\n    };\r\n    return {\r\n      state,\r\n      onSubmit,\r\n      sendSMS\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\nh3 {\r\n  margin: 40px 0 0;\r\n}\r\n.submit{\r\n  /*margin-left: 27px;*/\r\n  width:100%;\r\n}\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  display: inline-block;\r\n  margin: 0 10px;\r\n}\r\na {\r\n  color: blue;\r\n}\r\n\r\n#verifyBtn.disable{\r\n  pointer-events: none;\r\n  background: grey;\r\n  border: 1px grey solid;\r\n}\r\n</style>\r\n"]}]}